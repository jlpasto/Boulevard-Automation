Access Token 
pit-f2199403-7bee-4e0e-8109-c0065afbd4cb

Test-URL
http://localhost:8000/webhook-test/ghl-order

Production URL 
https://boulevard-automation.onrender.com/webhook/ghl-order

-- Local Run --
pip install -r requirements.txt
playwright install chromium   # run once to install browser
uvicorn app:app --host 0.0.0.0 --port 8000

-- Build Docker Image --
docker build -t boulevard-bot .
docker run -p 8000:8000 --env BLVD_EMAIL=xxx --env BLVD_PASSWORD=xxx boulevard-bot

-- Found Issues and Solution --
playwright version should match whats in the Dockerfile
Playwright requires greenlet==3.1.1 when using version 1.48.0.
In requirements.txt, pinned major libraries only , instead of usidng pip freeze
If this function accepts Request and Background task, browser will not appear 
async def ghl_webhook(request: Request, background_tasks: BackgroundTasks):


âœ… Best Practices Checklist
 Headless mode: Always headless=True.
 Environment secrets: Never hard-code.
 Session persistence: Use context.storage_state + mounted volume if needed.
 Async everywhere: Use async_playwright to avoid blocking.
 Logging & error handling: Add structured logs for debugging.
 Scaling: Use job queues (e.g. Celery, Redis) if tasks become heavy

ðŸš€ Example Deployment Flow (Render)
Push to GitHub.
Connect repo to Render â†’ New Web Service.
Set Docker as deploy type.
Add BLVD_EMAIL and BLVD_PASSWORD in Render â†’ Environment.
Deploy â†’ API runs at https://your-service.onrender.com/run.


ðŸ”§ Deployment Steps
Expose this FastAPI app (Docker, Fly.io, Render, etc.) with HTTPS.
In GoHighLevel â†’ Settings â†’ Integrations â†’ Webhooks,
Event: Order Completed
Method: POST
URL: https://<your-domain>/webhook/ghl-order
Content-Type: application/json

ðŸ”§ Optional Hardening
Verify Webhook: Require a secret token header (X-GHL-Secret) and check it.
Logging/DB: Save order payloads to a database before running Playwright for reliability.